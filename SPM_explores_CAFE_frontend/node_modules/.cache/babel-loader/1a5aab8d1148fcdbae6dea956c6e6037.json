{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Explorers Cafe\\\\FRONT\\\\Explorers_SPM_FRONTEND\\\\SPM_explores_CAFE_frontend\\\\src\\\\Components\\\\KitchenManager\\\\Menu\\\\AddFoods.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport Loading from '../../Loading/Loading';\nimport * as IoIcons5 from 'react-icons/io5';\nimport { GlobalState } from '../GlobalStateKM';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  food_id: '',\n  name: '',\n  description: '',\n  ingredients: '',\n  price: 0,\n  status: '',\n  // category: '',\n  id: ''\n};\n\nfunction AddFoods() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [food, setFood] = useState(initialState);\n  const [images, setImages] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const param = useParams();\n  useEffect(() => {\n    if (param.id) {}\n  }, [param.id]);\n\n  const handleUpload = async e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n      if (!file) return alert(\"File not uploaded.\");\n      if (file.size > 1024 * 1024 * 12) return alert(\"File is too large.\");\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return alert(\"File format is incorrect.\");\n      let formData = new FormData();\n      formData.append('file', file);\n      setLoading(true);\n      const res = await axios.post('http://localhost:5000/api/upload', formData);\n      setLoading(false);\n      setImages(res.data); // console.log(res)\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  const handleDestroy = async e => {\n    try {\n      setLoading(true);\n      await axios.post('http://localhost:5000/api/destroy', {\n        public_id: images.public_id\n      });\n      setLoading(false);\n      setImages(false);\n    } catch (err) {\n      alert(err.responce.data.msg);\n    }\n  };\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFood({ ...food,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!images) return alert(\"No image upload\");\n      await axios.post('http://localhost:5000/api/foods/', { ...food,\n        images\n      });\n      console.log(food);\n      setImages(false);\n      setFood(initialState);\n    } catch (err) {\n      alert(\"error occur\");\n    }\n  };\n\n  const styleUpload = {\n    display: images ? \"block\" : \"none\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"foodIcon\",\n      children: [/*#__PURE__*/_jsxDEV(IoIcons5.IoFastFood, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Add Foods\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create_food\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"file\",\n          id: \"file_up\",\n          onChange: handleUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"file_img\",\n          children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 58\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 39\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"file_img\",\n          style: styleUpload,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: images ? images.url : '',\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: handleDestroy,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"Container\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"food_id\",\n            style: {\n              fontSize: '25px'\n            },\n            children: \"Food ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"food_id\",\n            id: \"food_id\",\n            required: true,\n            value: food.food_id,\n            onChange: handleChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            style: {\n              fontSize: '25px'\n            },\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            id: \"name\",\n            required: true,\n            value: food.name,\n            onChange: handleChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            style: {\n              fontSize: '25px'\n            },\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            name: \"description\",\n            id: \"description\",\n            required: true,\n            value: food.description,\n            rows: \"8\",\n            onChange: handleChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"ingredients\",\n            style: {\n              fontSize: '25px'\n            },\n            children: \"Ingredients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            name: \"ingredients\",\n            id: \"ingredients\",\n            required: true,\n            value: food.ingredients,\n            rows: \"5\",\n            onChange: handleChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"price\",\n            style: {\n              fontSize: '25px'\n            },\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"price\",\n            id: \"price\",\n            required: true,\n            value: food.price,\n            onChange: handleChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            fontSize: \"24px\"\n          },\n          children: \"ADD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddFoods, \"i0FIA+DzJo04pd0IVthlkEjE/do=\", false, function () {\n  return [useParams];\n});\n\n_c = AddFoods;\nexport default AddFoods;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddFoods\");","map":{"version":3,"sources":["C:/Users/User/Desktop/Explorers Cafe/FRONT/Explorers_SPM_FRONTEND/SPM_explores_CAFE_frontend/src/Components/KitchenManager/Menu/AddFoods.js"],"names":["React","useState","useContext","useEffect","axios","Loading","IoIcons5","GlobalState","useParams","initialState","food_id","name","description","ingredients","price","status","id","AddFoods","state","food","setFood","images","setImages","loading","setLoading","param","handleUpload","e","preventDefault","file","target","files","alert","size","type","formData","FormData","append","res","post","data","err","response","msg","handleDestroy","public_id","responce","handleChangeInput","value","handleSubmit","console","log","styleUpload","display","url","fontSize"],"mappings":"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","sourcesContent":["import React, {useState, useContext, useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport Loading from '../../Loading/Loading'\r\nimport * as IoIcons5 from 'react-icons/io5'\r\nimport {GlobalState} from '../GlobalStateKM'\r\nimport {useParams} from 'react-router-dom'\r\n\r\nconst initialState = {\r\n    food_id: '',\r\n    name: '',\r\n    description: '',\r\n    ingredients: '',\r\n    price: 0,\r\n    status: '',\r\n    // category: '',\r\n    id: ''\r\n     \r\n}\r\nfunction AddFoods() {\r\n    const state = useContext(GlobalState)\r\n    const [food, setFood] = useState(initialState)\r\n    const [images, setImages] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const param = useParams()\r\n\r\n    useEffect(() => {\r\n        if(param.id){}\r\n    }, [param.id])\r\n\r\n    const handleUpload = async e => {\r\n        e.preventDefault()\r\n        try {\r\n\r\n            const file = e.target.files[0]\r\n\r\n            if(!file) return alert(\"File not uploaded.\")\r\n\r\n            if(file.size > (1024 * 1024) * 12)\r\n                return alert(\"File is too large.\")\r\n\r\n            if(file.type !== 'image/jpeg' && file.type !== 'image/png')\r\n                return alert(\"File format is incorrect.\")\r\n\r\n            let formData = new FormData()\r\n            formData.append('file', file)\r\n            setLoading(true)\r\n            const res = await axios.post('http://localhost:5000/api/upload', formData)\r\n            setLoading(false)\r\n            setImages(res.data)\r\n            // console.log(res)\r\n\r\n        } catch (err) {\r\n            alert (err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    const handleDestroy = async e => {\r\n        try {\r\n            setLoading(true)\r\n            await axios.post('http://localhost:5000/api/destroy', {public_id: images.public_id})\r\n            setLoading(false)\r\n            setImages(false)\r\n        } catch (err) {\r\n            alert(err.responce.data.msg)\r\n        }\r\n    }\r\n\r\n    const handleChangeInput = e => { \r\n        const {name, value} = e.target\r\n        setFood({...food, [name]:value})\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault()\r\n        try {\r\n            if(!images) return alert(\"No image upload\")  \r\n            \r\n            await axios.post('http://localhost:5000/api/foods/', {...food, images})            \r\n\r\n            console.log(food)\r\n\r\n            setImages(false)\r\n            setFood(initialState)\r\n             \r\n        } catch (err) {\r\n            alert(\"error occur\")\r\n        }\r\n    }\r\n\r\n\r\n    const styleUpload = {\r\n        display: images ? \"block\" : \"none\"\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"foodIcon\">\r\n                <IoIcons5.IoFastFood />\r\n                <h4>Add Foods</h4>\r\n            </div>\r\n            <hr />\r\n\r\n            <div className=\"create_food\">\r\n                <div className=\"upload\">\r\n                    <input type=\"file\" name=\"file\" id=\"file_up\" onChange={handleUpload}/>\r\n                    {\r\n                            loading ? <div id=\"file_img\"><Loading /></div>\r\n\r\n                            :<div id=\"file_img\" style={styleUpload} >\r\n                                <img src={images ? images.url : ''} alt=\"\" />\r\n                                <span onClick={handleDestroy}>X</span>\r\n                            </div>\r\n                    }\r\n                </div>\r\n\r\n                <form  className=\"Container\" onSubmit={handleSubmit}>\r\n                    <div className=\"row\">\r\n                        <label htmlFor=\"food_id\" style= {{fontSize: '25px'}} >Food ID</label>\r\n                            <input type=\"text\" name=\"food_id\" id=\"food_id\" required \r\n                            value={food.food_id} onChange={handleChangeInput}/>\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <label htmlFor=\"name\" style= {{fontSize: '25px'}}>Name</label>\r\n                            <input type=\"text\" name=\"name\" id=\"name\" required \r\n                            value={food.name} onChange={handleChangeInput} />\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <label htmlFor=\"description\" style= {{fontSize: '25px'}}>Description</label>\r\n                            <textarea type=\"text\" name=\"description\" id=\"description\" required \r\n                            value={food.description} rows=\"8\" onChange={handleChangeInput}  />\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <label htmlFor=\"ingredients\" style= {{fontSize: '25px'}}>Ingredients</label>\r\n                            <textarea type=\"text\" name=\"ingredients\" id=\"ingredients\" required \r\n                            value={food.ingredients} rows=\"5\" onChange={handleChangeInput} />\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <label htmlFor=\"price\" style= {{fontSize: '25px'}}>Price</label>\r\n                            <input type=\"number\" name=\"price\" id=\"price\" required \r\n                            value={food.price} onChange={handleChangeInput} />\r\n                    </div>\r\n                                {/* \r\n                    <div className=\"row\">\r\n                        <label htmlFor=\"categories\">Categories :</label>\r\n                            <select name=\"category\" value={food.category} onChange={handleChangeInput}>\r\n                                <option value=\"\">Please Select a Category</option>\r\n                                    {\r\n                                        categories.map( category => (\r\n                                            <option value={category._id} key={category._id}></option>\r\n                                        ))\r\n                                    }\r\n                            </select>\r\n                                \r\n                    </div> */}\r\n\r\n                    <button type=\"submit\" style={{fontSize: \"24px\"}}>ADD</button>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddFoods\r\n"]},"metadata":{},"sourceType":"module"}